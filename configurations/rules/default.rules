import org.openhab.core.persistence.*
import org.openhab.core.library.types.*
import org.openhab.model.script.actions.*

rule "Temperature average"
when
	Item Temperature changed
then
	var average = Temperature.averageSince(now.minusMinutes(30))
	postUpdate(AvgTemperature, average)
end


rule "Dim ceiling light"

when
        Item DimCeiling received command
then
	var dimLevel = 0
        //dimLevel = callScript("restapi")
	dimLevel = DimLevel.state

        if(receivedCommand=INCREASE) dimLevel = dimLevel + 10
        if(receivedCommand=DECREASE) dimLevel = dimLevel - 10

        if(dimLevel > 0) dimLevel = 0
        if(dimLevel < 255) dimLevel = 255

	sendCommand(CeilingLight, dimLevel as percentType)
	postUpdate(DimCeiling, dimLevel)
end
